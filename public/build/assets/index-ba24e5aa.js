import{r as f}from"./roles-57959868.js";import{a as g}from"./axios-82afda87.js";import{a as k}from"./api-base-25da54c4.js";import{a as h}from"./api-token-faa9c944.js";import{r as A,c as _}from"./routes-f0a6409b.js";import{c as v}from"./alerts-9c687a37.js";import"./index-559f946c.js";import"./_commonjsHelpers-725317a4.js";const T=()=>({credentials:{type:null,email:null,password:null}}),{API_URL:N}=k(),w=()=>({login:`${N}/login`}),{login:R}=w(),y=()=>({_login:async o=>await(await g.post(R,o)).data}),{MANAGER:E,TEACHER:c}=f(),{credentials:r}=T(),{getToken:b,saveToken:I}=h(),{setFirstName:D,setLastName:C,setRole:U,getRole:q}=_(),{_login:H}=y(),{defaultAlert:Q,toastAlert:L}=v(),{adminRoutes:M,teacherRoutes:x}=A(),{ADMIN_DASHBOARD:B}=M(),{TEACHER_TIME_IN:P}=x(),W=e=>{let o=$("#email"),i=$("#password"),l=$("#form-submit");const m=t=>{switch(t){case E:location.replace(B);break;case c:location.replace(P);break}};(()=>{const t=b(),s=q();if(!(t===void 0)&&!(t===null)&&s===e)return m(e)})(),l.on("submit",async function(t){t.preventDefault(),r.type=e,r.email=o.val(),r.password=i.val();const s=await H(r);if(!s.success)return L(s.data.error_messages);const n=s.data,a=s.data.role,p=a.name===c?n.teacher.first_name:n.manager.first_name,d=a.name===c?n.teacher.last_name:n.manager.last_name;I(s.data.token),D(p),C(d),U(a.name),m(e)}),o.on("keyup",function(){u($(this))}),i.on("keyup",function(){u($(this))});const u=t=>{t.parent().removeClass("has-danger"),t.closest("div").find(".invalid-feedback").remove(),t.removeClass("is-invalid")}};export{W as a};
